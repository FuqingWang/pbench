<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-02-11 Mon 16:47 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PBench agent installation</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Nick Dokos" />
<meta name="keywords" content="pbench" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="../../stylesheets/normalize.css" type="text/css"/>
<link rel="stylesheet" href="../../stylesheets/stylesheet.css" type="text/css"/>
<link rel="stylesheet" href="../../stylesheets/github-light.css" type="text/css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">PBench agent installation</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org07792e3">Introduction</a></li>
<li><a href="#org83ded6f">Repos</a>
<ul>
<li><a href="#org37a8289">External repo</a></li>
<li><a href="#org3f5b96c">Internal repo</a></li>
</ul>
</li>
<li><a href="#org2ee5fc4">Package dependencies</a></li>
<li><a href="#orgef7de67">Installing <code>pbench-agent</code></a></li>
<li><a href="#org8ecd67f">Administrator responsibility: Config file and ssh private key file</a></li>
<li><a href="#org59f60b7">*Installing%20using%20ansible</a></li>
</ul>
</div>
</div>

<div id="outline-container-org07792e3" class="outline-2">
<h2 id="org07792e3">Introduction</h2>
<div class="outline-text-2" id="text-org07792e3">
<p>
The pbench agent requires the installation of some generic bits, but it
also requires some localization: it needs to know where to send the results
for storage and analysis and it needs to be able to authenticate to the
storage server.
</p>

<p>
The generic bits are packaged as an RPM, available from COPR
(<a href="https://copr.fedorainfracloud.org/">https://copr.fedorainfracloud.org/</a>). We try to build a new release
every month or so.
</p>

<p>
The localization bits are of course, specific to a particular
installation.  Internally, we make them available to users through an
internal RPM, but other installations may use different methods to
make them available. Consult your local pbench guru for help.
</p>

<p>
In the following, we describe how to install <code>pbench-agent</code> using the
two RPMs (the "external" RPM and the "internal" RPM). You will have to
modify these instructions for <b>your</b> local installation. Nevertheless,
for simplicity, in the following we will refer to the two packages as
<code>pbench-agent</code> and <code>pbench-agent-internal</code>, but bear in mind that your
local installation may use different names or may not use an internal
RPM or may not use RPMs at all.
</p>

<p>
Note that the same <code>pbench-agent</code> version <b>must</b> be installed on all the
test systems that participate in a benchmark run: there is <b>no support
for mixed installations</b>.
</p>
</div>
</div>

<div id="outline-container-org83ded6f" class="outline-2">
<h2 id="org83ded6f">Repos</h2>
<div class="outline-text-2" id="text-org83ded6f">
<p>
You will need to install both the external repo and (if applicable)
the internal repo on every machine where you are planning to run
<code>pbench</code> (including VMs).  N.B. These steps must be run as <code>root</code>.
</p>
</div>

<div id="outline-container-org37a8289" class="outline-3">
<h3 id="org37a8289">External repo</h3>
<div class="outline-text-3" id="text-org37a8289">
<p>
If your system supports <code>dnf</code>, then you can copy the repo locally with:
</p>
<pre class="example">
dnf copr enable ndokos/pbench
</pre>
<p>
If your system only supports <code>yum</code>, you may be able to install the COPR plugin
and install similarly:
</p>
<pre class="example">
yum install yum-plugin-copr
yum copr enable ndokos/pbench
</pre>
<p>
If all else fails, you can manually download the repo, by visiting
<a href="https://copr.fedorainfracloud.org/coprs/ndokos/pbench/">https://copr.fedorainfracloud.org/coprs/ndokos/pbench/</a> and clicking
on the appropriate repo (Epel 6, Epel 7, Fedora XX).
Save it into <code>/etc/yum.repos.d/ndokos-pbench.repo</code>.
</p>
</div>
</div>

<div id="outline-container-org3f5b96c" class="outline-3">
<h3 id="org3f5b96c">Internal repo</h3>
<div class="outline-text-3" id="text-org3f5b96c">
<p>
Refer to your local installation guide or ask your local pbench guru for help.
</p>

<p>
If there is no such repo, you will need to install the <code>pbench-agent</code> RPM and
then manually install the config file and the pbench private key which will allow
you to send results to the server. Refer to <a href="#orgef7de67">Installing <code>pbench-agent</code></a> below.
</p>
</div>
</div>
</div>

<div id="outline-container-org2ee5fc4" class="outline-2">
<h2 id="org2ee5fc4">Package dependencies</h2>
<div class="outline-text-2" id="text-org2ee5fc4">
<p>
In order to simplify installation, the <code>pbench-agent</code> RPM requires the
installation of a few tools that should be available from the distribution's
standard repo(s), plus one package (<code>configtools</code>) that is available from
the external repo above.
</p>
</div>
</div>

<div id="outline-container-orgef7de67" class="outline-2">
<h2 id="orgef7de67">Installing <code>pbench-agent</code></h2>
<div class="outline-text-2" id="text-orgef7de67">
<p>
Once you have the COPR repo installed, you can install the <code>pbench-agent</code> RPM
and source the startup file to initialize your PATH and CONFIG environment
variables:
</p>
<pre class="example">
dnf install pbench-agent
. /etc/profile.d/pbench-agent.sh
</pre>
<p>
The <code>pbench-agent</code> RPM is <b>not</b> self-contained.  You will need to
somehow be given access to the config file and the pbench ssh private
key for your installation. They may be part of another RPM, or you may
be able to copy them from a central location or from media that your
administrator provides.
</p>

<p>
You can install these two as follows:
</p>
<pre class="example">
configfile=/path/to/config/file/pbench-agent.cfg
keyfile=/path/to/pbench/private/key/id_rsa
pbench-agent-config-activate $configfile
pbench-agent-config-ssh-key $configfile $keyfile
</pre>
<p>
You should be ready to roll.
</p>
</div>
</div>

<div id="outline-container-org8ecd67f" class="outline-2">
<h2 id="org8ecd67f">Administrator responsibility: Config file and ssh private key file</h2>
<div class="outline-text-2" id="text-org8ecd67f">
<p>
If you are the administrator for this installation, you will have to
create a config file and make it available to your users. How you make
it available is up to you. This section describes how to create the config file
in the first place.
</p>

<p>
The installation includes an example config file at
<code>/opt/pbench-agent/config/pbench-agent.cfg.example</code>. Copy this file to
a safe place and rename it to <code>pbench-agent.cfg</code>; then edit the lines that
are flagged with <code># CHANGE ME!</code> comments to reflect your setup.
</p>

<p>
The ssh key pair can be generated with
</p>
<pre class="example">
ssh-keygen -t rsa
</pre>
<p>
and an empty passphrase. The private key has to be made available to users
so they can complete their installation of <code>pbench-agent</code> as described above.
The public key should be added to the <code>authorized-keys</code> file of the <code>pbench</code>
user on the server where the results are copied.
</p>
</div>
</div>

<div id="outline-container-org59f60b7" class="outline-2">
<h2 id="org59f60b7">*Installing%20using%20ansible</h2>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Page updated: 2019-02-11 Mon 16:47</p>
</div>
</body>
</html>
